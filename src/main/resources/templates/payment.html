<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payment</title>
  <link rel="stylesheet" href="/webjars/bootstrap/5.2.3/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      var paymentMethodSelect = document.getElementById('payment-method');
      var paymentFields = document.querySelectorAll('.payment-fields');

      function updateDisplayedFields() {
        var selectedOption = paymentMethodSelect.value;

        paymentFields.forEach(function(field) {
          field.style.display = 'none';
        });

        var selectedFields = document.getElementById(selectedOption + '-fields');
        if (selectedFields) {
          selectedFields.style.display = 'block';
        }
      }
      paymentMethodSelect.addEventListener('change', updateDisplayedFields);
    });
  </script>
</head>
<body>
<div th:replace="header :: header"></div>
<div class="container" th:object="${paymentDto}">
  <h2 class="mt-4">Payment</h2>
  <form th:action="@{/auth/payment/{id}(id=*{id})}"  method="post">

    <div class="mb-3">
      <label for="payment-method" class="form-label">Payment Method:</label>
      <select id="payment-method" class="form-control">
        <option value="credit-card">Credit Card</option>
        <option value="paypal">PayPal</option>
        <option value="bank-transfer">Bank Transfer</option>
      </select>

      <div id="credit-card-fields" class="payment-fields">
        <div class="mb-3">
          <label for="card-number" class="form-label">Card number :</label>
          <input type="text" th:field="*{cardNumber}" th:value="*{cardNumber}"  class="form-control" id="card-number" name="cardNumber">
          <p style="color: red" th:each="error:${#fields.errors('cardNumber')}" th:text="${error}"></p>
        </div>
        <div class="mb-3">
          <label for="card-holder" class="form-label">Card holder :</label>
          <input type="text" th:field="*{cardHolder}" th:value="*{cardHolder}" class="form-control" id="card-holder" name="cardHolder">
          <p style="color: red" th:each="error:${#fields.errors('cardHolder')}" th:text="${error}"></p>
        </div>
        <div class="mb-3">
          <label for="expiration-date" class="form-label">Expiration date :</label>
          <input type="date" th:field="*{expirationDate}" th:value="*{expirationDate}" class="form-control" id="expiration-date" name="expirationDate" required>
          <p style="color: red" th:each="error:${#fields.errors('expirationDate')}" th:text="${error}"></p>
        </div>
        <div class="mb-3">
          <label for="cvv" class="form-label">CVV :</label>
          <input type="text" th:field="*{cvv}" th:value="*{cvv}" class="form-control" id="cvv" name="cvv">
          <p style="color: red" th:each="error:${#fields.errors('cvv')}" th:text="${error}"></p>
        </div>
      </div>

      <div id="paypal-fields" class="payment-fields">
        <!-- Champs pour le paiement par PayPal
        <div class="mb-3">
          <label for="paypal-email" class="form-label">PayPal Email:</label>
          <input type="email" th:field="*{paypalEmail}" th:value="*{paypalEmail}" class="form-control" id="paypal-email" name="paypalEmail">
          <p style="color: red" th:each="error:${#fields.errors('paypalEmail')}" th:text="${error}"></p>
        </div>
        -->
      </div>

      <div id="bank-transfer-fields" class="payment-fields">
        <!-- Champs pour le virement bancaire
        <div class="mb-3">
          <label for="bank-account" class="form-label">Bank Account:</label>
          <input type="text" th:field="*{bankAccount}" th:value="*{bankAccount}" class="form-control" id="bank-account" name="bankAccount">
          <p style="color: red" th:each="error:${#fields.errors('bankAccount')}" th:text="${error}"></p>
        </div>
        -->
      </div>
    </div>

    <button type="submit" name="id" th:value="*{id}" class="btn btn-primary">Confirm</button>
  </form>
</div>


</body>
</html>