<!DOCTYPE html>
<html lang="en"
      xmlns:th="https://www.thymeleaf.org"
      xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
    <div th:replace="~{fragments/headFragment :: head}"></div>
</head>

<body>

<div th:replace="~{fragments/navbar :: navbar}"></div>

    <div class="container-fluid p-3">

        <div class="row row-cols-1 row-cols-md-2">
            <div id="sidebar" class="col col-sm-4 col-md-2">
                <div class="py-3">
                    <h5 class="font-weight-bold">Categories</h5>
                    <ul th:each="category : ${categoryList}" class="list-group" >
                        <li class="list-group-item list-group-item-action d-flex justify-content-between align-items-center small">
                            <a th:href="@{/categories/{id}(id=${category.id})}" th:text="${category.name}"></a>
                            <span th:text="666" class="badge text-bg-secondary badge-pill"></span>
                        </li>
                    </ul>
                </div>
                <div class="py-3">
                    <h5 class="font-weight-bold">Months</h5>
                    <ul th:each="month : ${monthList}" class="list-group" >
                        <li class="list-group-item list-group-item-action d-flex justify-content-between align-items-center small">
                            <a th:href="@{/products/month/{monthName}(monthName=${month.name})}" th:text="${month.name}"></a>
                            <span th:text="3" class="badge text-bg-secondary badge-pill"></span>
                        </li>
                    </ul>
                </div>
            </div>

    <div class="col col-sm-8 col-md-10">
        <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3">

            <div th:each="product : ${productList}" class="col my-3">
                <div class="card h-100">
                    <a th:href="@{/products/details/{id}(id=${product.id})}">
                        <img src="data:image/jpeg;base64," th:attrappend="src=${product.imgBase64}" class="card-img-top">
                    </a>
                    <div class="card-body d-flex flex-column align-items-end position-relative">

                        <h5 class="card-title align-bottom me-auto">
                            <span th:text="${product.name}"></span>
                        </h5>

                        <p class="card-text">
                            <span th:text="${product.description}"></span>
                            <a class="stretched-link" th:href="@{/products/details/{id}(id=${product.id})}"></a>
                        </p>

                    </div>

                    <div class="card-footer">
                        <form th:action="@{/auth/add-to-cart/{id}(id=*{product.id})}" method="post">
                            <div class="input-group">
                                <input th:if="${product.unit == 'piece'}" type="number" min=0 step=1
                                       class="form-control"
                                       name="quantity" placeholder="Quantity" required>

                                <input th:unless="${product.unit == 'piece'}" type="number" min=0 step=0.250
                                       class="form-control"
                                       name="quantity" placeholder="Quantité" required>

                                <span class="input-group-text" id="basic-addon2" th:text="${product.unit}"></span>
                                <button type="submit" name="idProduct" th:value="*{product.id}"
                                        class="btn btn-outline-success">Ajouté</button>
                            </div>
                        </form>

                    </div>
                </div>
            </div>

        </div>

        </div>
        </div>

    </div>
<div th:include="footer"></div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
</body>
</html>